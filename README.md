# 大富翁在线 (Monopoly Online) - 开发分支

![Build Status](https://img.shields.io/badge/build-passing-brightgreen)
![Python Version](https://img.shields.io/badge/python-3.10%2B-blue)

**注意**: 这是本项目的活跃开发分支，可能包含未完成或不稳定的功能。稳定的发行版请参见 `master` 分支。

## 项目简介

一个基于 FastAPI 和 WebSocket 的实时在线大富翁网页游戏。本项目旨在完整复刻经典大富翁的核心玩法，并提供一个稳定、可扩展的后端架构。

## 当前开发重点

- **架构预留**: 为未来的复杂功能（如完整的监狱和破产系统）在数据模型和代码逻辑中进行预先设计和占位。
- **代码重构**: 持续优化核心逻辑，提高代码的可读性和可维护性。

## 简化的游戏规则 (当前实现)

为了快速迭代，当前版本对一些复杂规则进行了简化。这些是未来版本需要完整实现的目标：

-   **监狱系统**:
    -   **当前**: 玩家入狱后必须待满3回合，第三回合强制支付罚款出狱。
    -   **目标**: 玩家可选择支付罚款、使用“出狱许可证”或尝试掷双倍来提前出狱。

-   **破产机制**:
    -   **当前**: 玩家破产后，其所有资产直接归还给银行。
    -   **目标**: 完整实现资产的转移。如果因欠租而破产，资产将直接转移给债权人玩家；如果欠银行，资产将由银行拍卖。

## 未来路线图 (Roadmap)

-   [ ] **集团垄断租金加成**: 当玩家拥有某个颜色组的全部地产时，空地租金翻倍。
-   [ ] **完整监狱系统**: 实现支付罚款、使用卡片、掷双倍等多种出狱方式。
-   [ ] **完整破产机制**: 实现资产在玩家间的正确转移和银行拍卖机制。
-   [ ] **玩家间交易系统**: 允许玩家之间自由交易地产、现金和“出狱许可证”。
-   [ ] **UI/UX 优化**: 改进前端界面，增加动画效果，提升用户体验。

## 技术栈

- **后端**:
  - **Python 3.10+**
  - **FastAPI**: 高性能的 Web 框架，用于处理 HTTP 请求和 WebSocket 连接。
  - **Pydantic**: 用于数据验证和模型定义。
  - **Uvicorn**: ASGI 服务器。
- **前端**:
  - **HTML5**
  - **CSS3**
  - **Vanilla JavaScript**: 无框架，纯原生 JS 实现前端逻辑。

## 快速开始

### 环境要求

- Python 3.10 或更高版本
- 一个现代的网页浏览器 (如 Chrome, Firefox, Edge)

### 安装与运行

1.  **克隆仓库**
    ```bash
    git clone [你的仓库URL]
    cd [你的项目目录]
    ```

2.  **启动后端服务器**
    ```bash
    # 进入后端目录
    cd backend

    # 安装依赖
    pip install -r requirements.txt

    # 启动服务器
    uvicorn main:app --host 0.0.0.0 --port 8001 --reload
    ```
    服务器现在运行在 `http://localhost:8001`。

3.  **运行前端**
    - 直接在浏览器中打开项目根目录下的 `frontend/index.html` 文件即可。
    - 在打开的页面中，输入玩家名，然后创建或加入房间开始游戏。

## 项目结构

```
├── backend
│ ├── game_logic.py # 核心游戏逻辑
│ ├── main.py # FastAPI 应用入口，处理API和WebSocket
│ └── models.py # Pydantic 数据模型
└── frontend
├── index.html # 游戏主页面
├── script.js # 前端逻辑
└── style.css # 页面样式
```
